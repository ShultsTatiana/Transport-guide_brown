## Transport guide brown/Транспортный справочник, часть D
Cистема хранения транспортных маршрутов и обработки запросов к ней <br/>
Всего 5 частей, в которых будет производиться расширение проекта <br/>

### Ввод вывод в формате JSON
* запросы самого верхнего уровня заключены в словарь `{}`
* ключ словаря заключается в кавычки`""`
* ключ и значение разделяются двоеточием `:`
* значениями могут быть:
	- строки - заключаются в ковычки`""`
	- целые числа
	- вещественные числа <br/>
		грантируется, что вещественные числа не задаются в экспоненциальной записи,
		т.е. обязательно имеют целую часть и, возможно, дробную часть через десятичную точку. <br/>
	- словари, в том числе пустые - заключены в фигугрые скобки `{}`
	- массивы, содержащие значения - заключены в квадратные скобки `[]`
* пары ключ-значение разделяются запятыми `,` и преносом строки
* меджу всеми сиволами (`[]{},:`) может стоять произвольное количество пробельных символов 
* в словаре верхнего уровня два типа ключей (запросов) к базе: `base_requests` и `stat_requests`
* Ключи словарей могут располагаться в произвольном порядке.
### Формат ввода
в формате JSON
#### Запросы на заполнение базы `base_requests`
- запрос `base_requests` в качестве значения примает массив словарей - `"base_requests": [ {},{} ]
- словари в этом массиве делятся на два типа `"type"` запросов: `"Stop"` и `"Bus"`
1. `"type": "Stop",` - Запрос типа `"Stop"`
- `"type": "Stop",` - тип запроса, значение - **строка**
- `"name": "Biryulyovo Passazhirskaya",` - название остановки, значение - **строка**
- `"road_distances": {` - дорожное расстояние, **словарь** с расстояниями до перечисленных остановок
	a) `"Marushkino": 3900,` - ключ - название остановки, значение - расстояние до неё в метрах - **целое число**
	b) может быть пуст, с одним или несколькими парами остановка-расстояние
- `"longitude": 37.659164,` - широта, значение - **вещественное число**
- `"latitude": 55.580999` - долгота, значение - **вещественное число**
2. `"type": "Bus",` - Запрос типа `"Bus"`
- `"type": "Bus",` - тип запроса, значение - **строка**
- `"name": "828",` - название остановки, значение - **строка**
- `"stops": {` - маршрут - массив остановок на данном маршруте
	a) `"Biryulyovo Zapadnoye",` - значение - название остановки - **строка**
	b) может быть пуст, с одним или несколькими парами остановка-расстояние
- `"is_roundtrip": true` - тип маршрута, значение - bool
	a) `true` - кольцевой маршрут
	b) `false` - маршрут туда-обратно - НЕ кольцевой
#### Запросы к базе `stat_requests`
- `"type": "Stop",` - имеется два типа запросов: `"Stop"` и `"Bus"` - значение - **строка**
- `"name": "751",` - название остановки или автобуса, значение - **строка**
- `"id": 65100610` - номер запроса, значение - **целое число от 0 до 2147483647**

### Формат вывода
в формате JSON
- создать массив `[]` словарей `{}` - ответов на запросы
- ответы на запросы будут двух видов `Stop` и `Bus`
#### Stop
1. Словарь запроса `"Stop"` содержит следующие пары ключ-значение
1.1. `"request_id": 1965312327,` - `"id"` запроса, значение - **целое число** указанное ранее в запросе `stat_requests` <br/>
1.2. В зависимости от результата, добавить в словарь (либо-либо):
	- `"buses": [` - массив автобусов, проходящих через остановку запроса типа `Stop` <br/>
		массив содержит отсортированные в лексико-графическом порядке **строки** - названия автобусов <br/>
		массив может быть пуст (эквивалентно `Stop X: no buses`) <br/>
	- `"error_message": "not found"` - Если остановка`X` не найдена 
#### Bus
1. Словарь запроса `"Bus"` содержит следующие пары ключ-значение
1.1. `"request_id": 1965312327,` - `"id"` запроса, значение - **целое число** указанное ранее в запросе `stat_requests` <br/>
1.2. В зависимости от результата, добавить в словарь (либо-либо): <br/>
	- словарь, состоящий из следующих пар ключ-значение: <br/>
	-- `"route_length": 27600,` -  <br/>
	-- `"request_id": 519139350,` -  <br/>
	-- `"curvature": 1.31808,` -  <br/>
	-- `"stop_count": 5,` -  <br/>
	- `"error_message": "not found"` - Если автобус `X` не найден 

#### Дополнение к выводу запроса
- Если автобус `X` не найден - `"error_message": "not found"`.
- Если остановка`X` не найдена - `"error_message": "not found"`.
- Если остановка`X` существует в базе, но через неё не проходят автобусы - `[]`.
- Дубли остановок не допускаются, названия должны быть отсортированы в алфавитном порядке. <br/>
- Величину расстояния (а также другие **вещественные числа** в последующих частях задачи) 
**выводите с 6 значащими цифрами**, то есть предваряя модификатором `setprecision(6)`. 
При этом ваши **значения сравниваются** с верными не посимвольно, а **с относительной погрешностью 0,0001**.
#### Ввод и вывод производится в формате JSON
- Ключи словарей могут располагаться в произвольном порядке.  <br/>
- Форматирование (пробельные символы вокруг скобок, запятых и двоеточий)
 не имеет значения как во **входном**, так и в **выходном** JSON. <br/>


### Ограничения
- 1 секунда на обработку всех запросов.
- Не более 2000 запросов на создание базы.
- Не более 2000 запросов к уже созданной базе.
- Не более 100 остановок в маршруте.
- В рамках одного запроса **Stop** количество _stop#_ в не превосходит 100.
- **_D#_** являются целыми положительными числами, **_D#_ <= 10^6**.
- Не более 25 символов в названии автобуса или остановки. 
Допустимые символы — латинские буквы, цифры и пробелы. 
Все названия непусты, не могут начинаться на пробелы или заканчиваться ими.
- Географическое расстояние - вещественное число.
- **_L_** — дорожное расстояние - вещественное число, **_L_ >= 1**.
- При вычислении географического расстояния (расстояния между двумя точками на земной поверхности) считайте:
  1. число `π = 3.1415926535`, <br/>
  2. радиус Земли — `6371 км`. <br/>

### Уточнения
* Гарантируется, что остановка определена ТОЛЬКО В ОДНОМ запросе `Stop NAME`.
* Гарантируется, что каждая из **остановок** маршрута определена в некотором запросе Stop.
* Гарантируется, что сам **маршрут** NAME определён ТОЛЬКО В ОДНОМ запросе Bus.
* Гарантируется, что каждая из остановок **stop#** определена в некотором запросе Stop.
* Гарантируется, что в рамках одного запроса **Stop** все _stop#_ различны.
* Гарантируется, что **_D#_** >= длинны прямого маршрута по оверхности земли.
* Гарантируется, что для любых двух соседних остановок любого маршрута так или иначе задано расстояние по дорогам. 
